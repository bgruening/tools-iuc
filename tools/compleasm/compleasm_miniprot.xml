<tool id="compleasm_miniprot" name="Compleasm" profile="20.01" version="@TOOL_VERSION@+galaxy0">
    <description>miniprot</description>
    <macros>
        <import>macros.xml</import>
    </macros>

    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">compleasm</requirement>
    </requirements>

    <stdio>
        <exit_code range="1:" />
    </stdio>

    <command><![CDATA[
    compleasm miniprot
    -a '$input'
    -p '$input_prot'
    -o galaxy
    
]]>    </command>
    <inputs>
        <param argument="-a" name="input" type="data" format="fasta" label="Input genome file"/>
        <param argument="-p" name="input_prot" type="data" format="fasta" label="Input protein file"/>

    </inputs>

    <outputs>
        <data name='output' format='gff3' label="${tool.name} on ${on_string}: Miniprot" from_work_dir="galaxy/*.gff"/>
    </outputs>
    
    <tests>
        <test expect_num_outputs="1">
            <param name="input" value="small_genome.fasta"/>
            <param name="input_prot" value="prot.faa"/>
            <output name="output">
                <assert_contents>
                    <has_text text="##gff-version 3"/>
                    <has_text text="tr|I6X552|I6X552_MYCTU"/>
                    <has_text text="sp|P96847|AVTA_MYCTU"/>
                </assert_contents>
            </output>
        </test>
    </tests>
    <help><![CDATA[

    compleasm_ Using miniprot submodule to run miniprot alignment

    .. _compleasm: https://github.com/huangnengCSU/compleasm

    ]]>    </help>
    <expand macro="citation"/>
</tool>