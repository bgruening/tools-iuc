<macros>
    <token name="@VERSION_SUFFIX@">2</token>
    <token name="@TOOL_VERSION@">0.9.9</token>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="5.0.1">gawk</requirement>
            <requirement type="package" version="@TOOL_VERSION@">cnvkit</requirement>
        </requirements>
    </xml>
    <xml name="reference_interface">
        <conditional name="reference_source">
            <param name="ref_selector" optional="true" type="select" label="Choose the source for the reference genome">
                <option value="cached">Locally cached</option>
                <option value="history">History</option>
            </param>
            <when value="cached">
                <param argument="--fasta" optional="true" type="select" label="Reference genome">
                    <options from_data_table="fasta_indexes">
                        <!-- <filter type="data_meta" column="dbkey" key="dbkey" ref="input_sample_file" /> -->
                        <validator type="no_options" message="A built-in reference genome is not available for the build associated with the selected input file" />
                    </options>
                </param>
            </when>
            <when value="history">
                <param argument="--fasta"  optional="true" type="data" format="fasta" label="Reference" help="Reference sequence" />
            </when>
        </conditional>
    </xml>
    <xml name="xrefs">
        <xrefs>
            <xref type="bio.tools">cnvkit.py autobin</xref>
        </xrefs>
    </xml>
    <xml name="optional">
        <!-- general parameters -->
            <param argument="--method" type="select" label="Select the sequencing method of the input file(s) " help="">
                <option value="hybrid" selected="True">hybridization capture </option>
                <option value="amplicon">targeted amplicon sequencing </option>
                <option value="wgs"> whole genome sequencing </option>
            </param>
            <param argument="--access" optional="true" type="data" format="bed" multiple="false" label="Sequencing-accessible genomic regions, or exons to use as possible targets" help="(e.g. output of refFlat2bed.py)" />
            <param argument="--bp-per-bin" type="float" label=" Desired average number of sequencing read bases mapped to each bin." value="100000" help="" />
            <param argument="--target-max-size" type="float" label="Maximum size of target bins." value="20000" help="" />
            <param argument="--target-min-size" type="float" label="Minimum size of target bins." value="20" help="" />
            <param argument="--antitarget-max-size" type="float" label="Maximum size of antitarget bins." value="500000" help="" />
            <param argument="--antitarget-min-size" type="float" label="Minimum size of antitarget bins." value="500" help="" />
            <param argument="--annotate" optional="true" type="data" format="bed" multiple="false" label="Use gene models from this file to assign names to the target regions." help="Format: UCSC refFlat.txt or ensFlat.txt file (preferred), or BED, interval list, GFF, or similar." />
            <param argument="--short-names" type="boolean" checked="false" truevalue="TRUE" falsevalue="FALSE" label="Reduce multi-accession bait labels to be short and consistent" help="" />
            <param argument="--target-output-bed" optional="true" type="data" format="bed" multiple="false" label="Filename for target BED output." help="If not specified, constructed from the input file basename." />
            <param argument="--antitarget-output-bed" optional="true" type="data" format="bed" multiple="false" label="Filename for antitarget BED output." help="If not specified, constructed from the input file basename." />
    </xml>    
</macros>
