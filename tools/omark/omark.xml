<?xml version="1.0"?>
<tool id="omark" name="OMark" version="@TOOL_VERSION@" profile="21.05">
    <description></description>
    <macros>
        <import>macros.xml</import>
    </macros>


    <command detect_errors="exit_code"><![CDATA[
    omark
    -f '$input'
    $omark_mode
    ##### $database
    -t '$t'
    -r '$r'
    
    #if $og_fasta:
        -of '$output_of'
    #end if
    #if $iso_file:
        -i '$output_iso'
    #end if

    #if $verbose:
        -v
    #end if
    
    
    ## Outputs
    
    '$output_omark']]></command>

    <inputs>
        <param argument="-f" name="input" type="data" format="omamer" label="Input OMAmer file" help="obtained as output from an OMAmer search"/>
        <param argument="-c" name="omark_mode" type="boolean"  checked="false" label="Switch OMArk mode to only computing a list of conserved HOGs and output it as list" help="Can be used to obtain a set of genes on which to train"/>

        <param name="database" label="OMAmer database" type="select">
            <options from_data_table="omamer">
            </options>
        </param>

        <param argument="-t" type="text" optional="true" label="Taxonomic identifier">
            <sanitizer invalid_char="">
                <valid initial="string.letters,string.digits">
                    <add value="_" />
                </valid>
            </sanitizer>
            <validator type="regex">[0-9a-zA-Z_]+</validator>
        </param>
        <param argument="-r" type="text" optional="true" label="Taxonomic rank">
            <sanitizer invalid_char="">
                <valid initial="string.letters,string.digits">
                    <add value="_" />
                </valid>
            </sanitizer>
            <validator type="regex">[0-9a-zA-Z_]+</validator>
        </param>

        <param name="og_fasta" type="boolean"  checked="false" label="Genrate the original FASTA file"/>
        <param name="iso_file" type="boolean"  checked="false" label="Genrate a isoform file"/>
        <param name="verbose" type="boolean"  checked="false" label="Turn on logging information about OMArk process"/>
    </inputs>

    <outputs>
        <output name="output_of" format="fasta" label="OMark on ${on_string}: Orignal FASTA file" >
            <filter>og_fasta</filter>
        </output>
        <output name="output_iso" format="" label="OMArk on ${on_string}: Isoform file" >
            <filter>iso_file</filter>
        </output>
    </outputs>

    <tests>
        
    </tests>

    <help><![CDATA[
        OMark_: 

        .. _OMark: 
    ]]></help>
</tool>

        