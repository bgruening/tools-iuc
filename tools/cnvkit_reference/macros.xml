<macros>
    <token name="@VERSION_SUFFIX@">2</token>
    <token name="@TOOL_VERSION@">0.9.9</token>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="5.0.1">gawk</requirement>
            <requirement type="package" version="@TOOL_VERSION@">cnvkit</requirement>
        </requirements>
    </xml>
    <xml name="reference_interface">
        <conditional name="reference_source">
            <param name="ref_selector" optional="true" type="select" label="Choose the source for the reference genome">
                <option value="cached">Locally cached</option>
                <option value="history">History</option>
            </param>
            <when value="cached">
                <param argument="--fasta" optional="true" type="select" label="Reference genome">
                    <options from_data_table="fasta_indexes">
                        <!-- <filter type="data_meta" column="dbkey" key="dbkey" ref="input_sample_file" /> -->
                        <validator type="no_options" message="A built-in reference genome is not available for the build associated with the selected input file" />
                    </options>
                </param>
            </when>
            <when value="history">
                <param argument="--fasta"  optional="true" type="data" format="fasta" label="Reference" help="Reference sequence" />
            </when>
        </conditional>
    </xml>
    <xml name="xrefs">
        <xrefs>
            <xref type="bio.tools">cnvkit.py reference</xref>
        </xrefs>
    </xml>
    <xml name="optional">
        <!-- general parameters -->
            <param argument="--cluster" type="boolean" checked="false" truevalue="TRUE" falsevalue="FALSE" label="Calculate and store summary stats for clustered subsets of the normal samples with similar coverage profiles" help="" />
            <param argument="--min-cluster-size" optional="true" type="float" label="Minimum cluster size to keep in reference profiles." value="" help="" />
            <param argument="--sample-sex" type="select" label="Method used in the 'segment' step" help=""> #### multivalues can be acceptid here
                <option value="Male"></option>
                <option value="Female"></option>
            </param>
            <param argument="--male-reference" type="boolean" checked="false" truevalue="TRUE" falsevalue="FALSE" label="Create a male reference" help="shift female samples' chrX log-coverage by -1, so the reference chrX average is -1. Otherwise, shift male samples' chrX by +1, so the reference chrX average is 0" />         
    </xml>
    <xml name="construct_CNV_ref_with_natural_expected_number">
        <param argument="--targets" optional="false" type="text" label="Target intervals (.bed or .list)" value="" help="" />
        <param argument="--antitargets" optional="false" type="text" label="Antitarget intervals (.bed or .list)" value="" help="" />
    </xml>
    <xml name="disable_specific_automatic_bias_corrections">
        <param argument="--no-gc" type="boolean" checked="false" truevalue="TRUE" falsevalue="FALSE" label="Skip GC correction" help="" />
        <param argument="--no_edge" type="boolean" checked="false" truevalue="TRUE" falsevalue="FALSE" label="skip edge-effect correction" help="" />
        <param argument="--no-rmask" type="boolean" checked="false" truevalue="TRUE" falsevalue="FALSE" label="skip repeat master correction" help="" /> 
    </xml>
</macros>