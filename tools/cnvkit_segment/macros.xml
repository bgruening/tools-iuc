<macros>
    <token name="@VERSION_SUFFIX@">2</token>
    <token name="@TOOL_VERSION@">0.9.9</token>
    <xml name="requirements">
        <requirements>
            <requirement type="package" version="5.0.1">gawk</requirement>
            <requirement type="package" version="@TOOL_VERSION@">cnvkit</requirement>
        </requirements>
    </xml>
    <xml name="xrefs">
        <xrefs>
            <xref type="bio.tools">cnvkit.py segment</xref>
        </xrefs>
    </xml>
    <xml name="optional">
        <!-- general parameters -->
            <param argument="--dataframe" optional="true" type="text" label="Data frame" value="" help="File name to save the raw R dataframe emitted by CBS or Fused Lasso. (Useful for debugging.)" />
            <param argument="--method" type="select" label="Segmentation method" help="">
                <option value="cbs" selected="True">Circular Binary Segmentation (CBS) method,hybrid (CBS)</option>
                <option value="flasso">Fused lasso, hybrid (flasso)</option>
                <option value="haar"> a pure-Python implementation of HaarSeg, a wavelet-based method. Very fast and performs reasonably well on small panels, but tends to over-segment large datasets., hybrid (haar)</option>
                <option value="none">simply calculate the weighted mean log2 value of each chromosome arm. Useful for testing or debugging, or as a baseline for benchmarking other methods., hybrid (none)</option>
                <option value="hmm">(experimental) – a 3-state Hidden Markov Model suitable for most samples. Faster than CBS, and slower but more accurate than Haar. Requires the Python package pomegranate, as do the next two methods., hybrid (hmm)</option>
                <option value="hmm-tumor"> (experimental) – a 5-state HMM suitable for finer-grained segmentation of good-quality tumor samples. In particular, this method can detect focal amplifications within a larger-scale, smaller-amplitude copy number gain, or focal deep deletions within a larger-scale hemizygous loss. Training this model takes a bit more CPU time than the simpler hmm method., hybrid (hmm-tumor)</option>
                <option value="hmm-germline">(experimental) – a 3-state HMM with fixed amplitude for the loss, neutral, and gain states corresponding to absolute copy numbers of 1, 2, and 3. Suitable for germline samples and single-cell sequencing of samples with mostly-diploid genomes that are not overly aneuploid., hybrid (hmm-germline)</option>
            </param>
            <param argument="--threshold" optional="true" type="float" label="Significance threshold" value="" help="To accept breakpoints during segmentation. For HMM methods, this is the smoothing window size." />
            <param argument="--drop-low-coverage" type="boolean" checked="false" truevalue="TRUE" falsevalue="FALSE" label="Drop very-low-coverage bins before segmentation" help="To avoid false-positive deletions in poor-quality tumor samples" />
            <param argument="--drop-outliers" optional="true" type="float" label=" Drop outlier" value="10" help="Drop outlier bins more than this many multiples of the 95th quantile away from the average within a rolling window. Set to 0 for no outlier filtering." />
            <param argument="--smooth-cbs" type="boolean" checked="false" truevalue="TRUE" falsevalue="FALSE" label="Perform an additional smoothing before CBS segmentations" help="" />        
    </xml>
    <xml name="additionally_SNP_process">
        <param argument="--vcf" optional="true" type="data" format="vcf" multiple="false" label="VCF file" help="VCF file name containing variants for calculation of b-allele frequencies." />
        <param argument="--sample-id" optional="true" type="text" label="Name of the sample in the VCF to use for b-allele frequency extraction." value="" help="" />
        <param argument="--normal-id" optional="true" type="text" label="Corresponding normal sample ID in the input VCF" value="" help="This sample is used to select only germline SNVs to calculate b-allele frequencies." />
        <param argument="--min-variant-depth" optional="true" type="float" label="Minimum read depth for a SNV" value="20" help="To be used in the b-allele frequency calculation." />
        <param argument="--zygosity-freq" optional="true" type="float" label=" Ignore VCF's genotypes and instead infer zygosity from allele frequencies." value="0.25" help="" />  
    </xml>
</macros>