<tool id="rasusa" name="rasusa" version="0.8.0+galaxy0" python_template_version="3.5" profile="21.05">
    <requirements>
        <requirement type="package" version="0.8.0">rasusa</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
rasusa
#if str( $fastq_input.fastq_input_selector ) == "paired":
-i '${fastq_input.fastq_input1}'
-i '${fastq_input.fastq_input2}'
#elif str( $fastq_input.fastq_input_selector ) == "paired_collection":
-i '${fastq_input.fastq_input1.forward}'
-i '${fastq_input.fastq_input1.reverse}'
#else:
-i '${fastq_input.fastq_input1}'
#end if
#if $bases =! '':
-b '$bases'
#else:
-g '$genome-size'
-c '$coverage'
#end if
#if str( $subsample.type ) == "by_num":
-n '$subsample.num'
#if str( $subsample.type ) == "by_frac":
-f '$subsample.frac'
-s $seed
    ]]></command>
    <inputs>
        <conditional name="fastq_input">
            <param name="fastq_input_selector" type="select" label="Single or Paired-end reads" help="Select between paired and single end data">
                <option value="paired">Paired</option>
                <option value="single">Single</option>
                <option value="paired_collection">Paired Collection</option>
            </param>
            <when value="paired">
                <param name="fastq_input1" type="data" format="fastq,fasta" label="Select first set of reads" help="Specify dataset with forward reads"/>
                <param name="fastq_input2" type="data" format="fastq,fasta" label="Select second set of reads" help="Specify dataset with reverse reads"/>
            </when>
            <when value="single">
                <param name="fastq_input1" type="data" format="fastq,fasta" label="Select fastq dataset" help="Specify dataset with single reads"/>
            </when>
            <when value="paired_collection">
                <param name="fastq_input1" format="fastq,fasta" type="data_collection" collection_type="paired" label="Select a paired collection" help="See help section for an explanation of dataset collections"/>
            </when>
        </conditional>
        <conditional name="subsample">
            <param name="type" type="select">
                <option value="by_num">Subsample to a specific number of reads</option>
                <option value="by_frac">Subsample to a fraction of the reads</option>
            </param>
            <when value="by_num">
                <param argument="num" type="integer" value="" min="0"/>
            </when>
            <when value="by_frac">
                <param argument="frac" type="float" value="" min="0" max="1"/>
            </when>
        </conditional>
        <param type="text" argument="genome-size" label="Genome size to calculate coverage with respect to"/>
        <param type="text" argument="coverage" label="The desired coverage to sub-sample the reads to"/>
        <param type="text" argument="bases" label="Explicitly set the number of bases required"/>
        <param type="integer" argument="seed" optional="true" label="Random seed to use"/>
        </conditional>
    </inputs>
    <outputs>
        <data name="output" format="fastq,fasta" label=""/>
    </outputs>
    <help><![CDATA[
        Randomly subsample reads to a specified coverage
    ]]></help>
</tool>