<tool id="data_manager_ncbi_fcs_gx_database_downloader" name="NCBI FCS GX database downloader" version="@TOOL_VERSION@+galaxy@VERSION_SUFFIX@" python_template_version="3.5" tool_type="manage_data" profile="@PROFILE@">
    <description>Downoad the NCBI FCS GX database</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <command detect_errors="exit_code"><![CDATA[
python '$__tool_directory__/data_manager_ncbi_fcs_gx_database_downloader.py
    ]]></command>
    <inputs>
        <conditional name="context">
            <param name="context_selector" type="select" label="Select the context">
                <option value="data" selected="true">Manage GX database</option>
                <option value="config">Configure available GX database</option>
            </param>
            <when value="data">
                <conditional name="mode">
                    <param name="database" type="select" label="Select database"> 
                        <options from_data_table="ncbi_fcs_gx_databases" />
                    </param>
                    <param name="mode_selector" type="select" label="Select the mode">
                        <option value="download" selected="true">Download GX database</option>
                        <option value="delete">Delete downloaded GX database</option>
                    </param>
                    <when value="download">
                    </when>
                    <when value="delete">
                    </when>
                 </conditional>
            </when>
            <when value="config">
                <conditional name="mode">
                    <when value="update">
                        <param name="database" type="select" label="Select database"> 
                            <options from_data_table="ncbi_fcs_gx_databases" />
                        </param>
                        <param name="default" type="boolean" label="Make this database the default" value="" />
                        <param name="name" type="text" label="Name for dropdown" value="" />
                        <param name="manifest" type="text" label="Manifest for remote database to cache locally"
                               value="https://ftp.ncbi.nlm.nih.gov/genomes/TOOLS/FCS/database/latest/all.manifest" />
                        <param name="local_cache_dir" type="text" label="Local database cache directory" value="" />
                        <param name="tool_cache_dir" type="text" label="Directory where tools will copy locally cached database"
                               value="/dev/shm/gxdb" />
                    </when>
                    <when value="add">
                        <param name="default" type="boolean" label="Make this database the default" value="" />
                        <param name="name" type="text" label="Name for dropdown" value="" />
                        <param name="manifest" type="text" label="Manifest for remote database to cache locally"
                               value="https://ftp.ncbi.nlm.nih.gov/genomes/TOOLS/FCS/database/latest/all.manifest" />
                        <param name="local_cache_dir" type="text" label="Local database cache directory" value="" />
                        <param name="tool_cache_dir" type="text" label="Directory where tools will copy locally cached database"
                               value="/dev/shm/gxdb" />
                    </when>
                </conditional>
            </when>
        </conditional>
    </inputs>
    <outputs>
        <data name="output_file" format="data_manager_json" label="${tool.name}" />
    </outputs>
    <help><![CDATA[
    ]]></help>
    <expand macro="citations" />
</tool>
